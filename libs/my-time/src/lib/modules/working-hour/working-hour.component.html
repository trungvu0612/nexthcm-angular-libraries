<div class="page-container">
  <div class="heading-title">Working Hour</div>
  <form (ngSubmit)="onSearch()" [formGroup]="$any(searchForm)" class="object-form-container">
    <div class="grid grid-cols-1 md:grid-cols-2 my-10 text-base gap-6 working-time">
      <div class="working-section relative">
        <div class="shadow-tmp"></div>
        <div class="grid md:grid-cols-2 text-white text-center bg-purple-700 pt-5 pl-5 pr-5 pb-2 rounded-t-lg">
          <div>
            <img class="mx-auto" src="assets/images/finger-white.png" />
          </div>
          <div>
            <div class="font-bold text-xl mb-5">Worked time yesterday</div>
            <div class="mb-3 font-bold text-4xl">{{ myWorkingHour.workingTimeYesterday }}</div>
            <div class="mb-5 text-base">
              <img class="inline mr-1" src="assets/images/map-pin.png" />{{ myWorkingHour.userOffice }}
            </div>
          </div>
        </div>
        <div class="grid md:grid-cols-2 text-white text-center bg-purple-700 pt-5 pl-5 pr-5 pb-2 rounded-b-lg">
          <div class="text-base">
            <div class="text-xl">Time in</div>
            <div class="my-3 time-height text-base">{{ myWorkingHour?.timeInYesterday }}</div>
          </div>
          <div class="border-time text-base">
            <div class="text-xl">Time out</div>
            <div class="my-3 time-height text-base">{{ myWorkingHour?.timeOutYesterday }}</div>
          </div>
        </div>
      </div>

      <div class="text-center shadow-md bg-white rounded-lg grid">
        <div class="heading-title flex items-center justify-center">Your working days this month</div>
        <div class="finger-section">
          <span class="text-8xl text-blue-500 font-bold">11.5</span>
          <span class="text-3xl text-gray-400 font-bold">/12</span>
        </div>
      </div>
    </div>

    <div class="working-data">
      <div class="grid grid-cols-2 text-base gap-1">
        <div>
          <div class="text-left inline mr-10">
            <!--            <select class="year-filter appearance-none">-->
            <!--              <option>2021</option>-->
            <!--              <option>2021</option>-->
            <!--            </select>-->
          </div>
          <div class="text-left inline mr-10">
            <!--            <select class="month-filter appearance-none">-->
            <!--              <option>November</option>-->
            <!--              <option>September</option>-->
            <!--            </select>-->
          </div>
          <div class="text-left inline mr-10">
            <!--            <select class="week-filter appearance-none">-->
            <!--              <option>Week 1</option>-->
            <!--              <option>Week 2</option>-->
            <!--            </select>-->
          </div>
        </div>

        <div>
          <div class="col-span-2 filter-search">
            <button
              (click)="workingStatus('all')"
              [class.actived]="!workingMeStatus"
              class="
                focus:outline-none
                hover:bg-blue-500 hover:border-blue-500 hover:text-white hover:bg-blue-500
                text-base
                rounded-lg
                pl-5
                pr-5
                pt-1
                pb-1
                inline
                mr-4
              "
            >
              Everyone
            </button>
            <button
              (click)="workingStatus('me')"
              [class.actived]="workingMeStatus"
              class="
                focus:outline-none
                hover:bg-blue-500 hover:border-blue-500 hover:text-white hover:bg-blue-500
                text-base
                rounded-lg
                pl-5
                pr-5
                pt-1
                pb-1
                inline
              "
            >
              Only me
            </button>
          </div>
        </div>
      </div>

      <div class="my-3">
        <input
          class="
            searchbar
            px-3
            py-3
            placeholder-blueGray-300
            text-blueGray-600
            relative
            bg-white
            rounded
            text-sm
            border
            outline-none
            focus:outline-none focus:ring
            w-full
          "
          placeholder="Search by CIF, Full Name, Office"
          type="text"
        />
      </div>

      <div class="flex flex-col shadow-md bg-white">
        <div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8">
          <div class="py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8">
            <div class="shadow overflow-hidden border-b border-gray-200 sm:rounded-lg">
              <div *ngIf="workingMeStatus" class="grid-rows-1">
                <div class="grid-cols-12">
                  <section class="main-section">
                    <ngx-table
                      [columns]="(columns$ | async) || []"
                      [configuration]="configuration"
                      [data]="(data$ | async) || []"
                    >
                      <ng-template let-row>
                        <td>{{ item(row).userInfo?.office?.name }}</td>
                        <td>{{ item(row).trackingDate | date: 'dd/MM/yyyy' }}</td>
                        <td>{{ item(row).day }}</td>
                        <td>{{ item(row).inTime * 1000 | date: 'HH:mm':'GMT' }}</td>
                        <td>{{ item(row).outTime * 1000 | date: 'HH:mm':'GMT' }}</td>
                        <td>{{ item(row).totalWorkingTime }}</td>
                        <td>{{ item(row).workingDay | number }}</td>
                        <td>{{ item(row).ot }}</td>
                        <td>{{ item(row).onsiteDay }}</td>
                        <td>{{ item(row).leave?.leaveType?.name }}</td>
                        <td>
                          <div class="flex">
                            <button
                              (click)="workingHourDetail(item(row).id)"
                              appearance="flat"
                              class="tui-space_right-3"
                              icon="tuiIconShowLarge"
                              size="m"
                              tuiIconButton
                            ></button>
                            <button
                              (click)="requestUpdateTime(item(row).id)"
                              appearance="flat"
                              icon="tuiIconEditLarge"
                              size="m"
                              tuiIconButton
                            ></button>
                          </div>
                        </td>
                      </ng-template>
                    </ngx-table>
                  </section>
                </div>
              </div>

              <div *ngIf="!workingMeStatus" class="grid-rows-1">
                <div class="grid-cols-12">
                  <section class="main-section">
                    <ngx-table
                      #table
                      [columns]="(columnsEveryone$ | async) || []"
                      [configuration]="configuration"
                      [data]="(data$ | async) || []"
                    >
                      <ng-template let-row>
                        <td>{{ item(row).userInfo.code }}</td>
                        <td>{{ item(row).userInfo?.profile?.fullName }}</td>
                        <td>{{ item(row).userInfo?.office?.name }}</td>
                        <td>{{ item(row).trackingDate | date: 'dd/MM/yyyy' }}</td>
                        <td>{{ item(row).day }}</td>
                        <td>{{ item(row).inTime * 1000 | date: 'HH:mm':'GMT' }}</td>
                        <td>{{ item(row).outTime * 1000 | date: 'HH:mm':'GMT' }}</td>
                        <td>{{ item(row).totalWorkingTime }}</td>
                        <td>{{ item(row).workingDay | number }}</td>
                        <td>
                          <div class="flex">
                            <button
                              (click)="workingHourDetail(item(row).id)"
                              appearance="flat"
                              class="tui-space_right-3"
                              icon="tuiIconShowLarge"
                              size="m"
                              tuiIconButton
                            ></button>
                            <button
                              (click)="requestUpdateTime(item(row).id)"
                              appearance="flat"
                              icon="tuiIconEditLarge"
                              size="m"
                              tuiIconButton
                            ></button>
                          </div>
                        </td>
                      </ng-template>
                    </ngx-table>
                  </section>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
