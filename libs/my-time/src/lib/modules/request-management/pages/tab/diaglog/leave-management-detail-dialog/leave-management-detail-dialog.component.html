<article *ngIf="data$ | async as data">
  <header class="flex justify-between items-center mb-7">
    <h1 class="text-2xl font-semibold">Leave Detail</h1>
    <button (click)="close()">
      <tui-svg src="tuiIconRemoveLarge"></tui-svg>
    </button>
  </header>

  <table class="detail-table">
    <tr>
      <th>Date modified:</th>
      <td>
        <p>{{ data.lastModifiedDate | date: 'MM/dd/yyyy' }}</p>
      </td>
    </tr>
  </table>

  <table class="detail-table mb-6">
    <th class="self-center">Date:</th>
    <td>
      <form [formGroup]="form">
        <formly-form [fields]="fields" [form]="form" [model]="model" class="flex justify-start"></formly-form>
      </form>
    </td>
  </table>

  <table class="detail-table grid grid-cols-2 gap-4">
    <tr>
      <th>Leave Type:</th>
      <td>
        <p class="font-semibold">{{ data.leaveType?.name }}</p>
      </td>
    </tr>

    <tr>
      <th>Days:</th>
      <td>
        <p>1.0</p>
      </td>
    </tr>

    <tr>
      <th>Status:</th>
      <td class="ml-8">
        <tui-tag [class]="STATUS[data.status + ''] + '-tag'" [value]="STATUS[data.status + ''] | titlecase"></tui-tag>
      </td>
    </tr>

    <tr>
      <th>Sent to:</th>
      <td>
        <p class="underline text-blue-500">Nguyen Hai Vien</p>
      </td>
    </tr>

    <tr>
      <th>Comment:</th>
      <td>
        <p>{{ data.comments }}</p>
      </td>
    </tr>

    <!--    <tr>-->
    <!--      <th class="self-center">Assign Staff:</th>-->
    <!--      <td>-->
    <!--        <form [formGroup]="form">-->
    <!--          <formly-form [fields]="fieldAssign" [form]="formAssign" [model]="modelAssign" class="flex justify-start"></formly-form>-->
    <!--        </form>-->
    <!--      </td>-->
    <!--    </tr>-->
  </table>

  <tui-tabs [(activeItemIndex)]="activeItemIndex" class="mt-8">
    <button tuiRipple="var(--tui-text-01)" tuiTab>Ghi Chú</button>
    <button tuiRipple="var(--tui-text-01)" tuiTab>Lịch Sử Hoạt Động</button>
  </tui-tabs>
  <ng-container [ngSwitch]="activeItemIndex">
    <ng-container *ngSwitchCase="0">
      <hcm-noted class="m-8"></hcm-noted>
    </ng-container>
    <ng-container *ngSwitchCase="1">
      <hcm-history-request class="m-8"></hcm-history-request>
    </ng-container>
  </ng-container>

  <footer class="flex justify-center">
    <button (click)="edit(data.id)" *ngIf="data.status !== 1 && data.status !== 0" class="cancel blue-button mr-7">
      Cancel Leave Request
    </button>
    <button (click)="cancel()" class="blue-button">Close</button>
  </footer>
</article>
