<main *transloco="let t" class="main-page">
  <section *ngIf="dataRequest$ | async as data">
    <article>
      <header class="flex justify-between items-center mb-7">
        <h1 class="text-2xl font-semibold">{{ t('MY_TIME.leaveDetail') }}</h1>
      </header>

      <div class="mb-5">
        <ng-container *ngIf="leaveRequestType === 'employee'">
          <button (click)="onCancel()" appearance="custom" tuiButton>{{ t('MY_TIME.cancel') }}</button>
        </ng-container>
        <ng-container *ngIf="leaveRequestType === 'manager'">
          <button (click)="showDialog(myId)" appearance="custom" tuiButton>{{ t('MY_TIME.reject') }}</button>
          <button *ngIf="data?.status!=1" (click)="approveLeaveRequest(myId)" appearance="custom-green" class="ml-2" tuiButton>
            {{ t('MY_TIME.approve') }}
          </button>
        </ng-container>
      </div>

      <table class="detail-table">
        <tr>
          <td>{{ t('MY_TIME.staffName') }}:</td>
          <td class="min-contain">
            <span class="font-semibold ml-2">{{ data.employeeDTO?.profile?.fullName }}</span>
          </td>
          <td>
            {{ t('MY_TIME.office') }}: <span class="font-semibold ml-2">{{ data.employeeDTO?.office?.name }}</span>
          </td>
        </tr>

        <tr>
          <td>{{ t('MY_TIME.dateFrom') }}:</td>
          <td class="min-contain">
            <span class="font-semibold ml-2">{{ data?.fromDate | date: 'dd/MM/yyyy' }}</span>
          </td>
          <td>
            {{ t('MY_TIME.asignStaff') }}:
            <span class="font-semibold ml-2">{{ data?.employeeDTO?.reportTo?.username }}</span>
          </td>
        </tr>
        <tr>
          <td>{{ t('MY_TIME.dateTo') }}:</td>
          <td class="min-contain">
            <span class="font-semibold ml-2">{{ data?.toDate | date: 'dd/MM/yyyy' }}</span>
          </td>
          <td>
            {{ t('MY_TIME.type') }}: <span class="font-semibold ml-2"> {{ data?.leaveType?.name }}</span>
          </td>
        </tr>
      </table>

      <table class="detail-table grid grid-cols-2 gap-4">
        <tr class="col-span-full">
          <td>{{ t('MY_TIME.toDayOfDay') }}:</td>
          <td class="min-contain">
            <span class="font-semibold ml-2">{{ data.durationInDay }}</span>
          </td>
        </tr>

        <tr class="col-span-full">
          <td>{{ t('MY_TIME.status') }}:</td>
          <td class="ml-8 min-contain">
            <tui-tag
              [class]="STATUS[data.status + ''] + '-tag ml-2'"
              [value]="STATUS[data.status + ''] | titlecase"
            ></tui-tag>
          </td>
        </tr>

        <tr class="col-span-full">
          <td>{{ t('MY_TIME.sendTo') }}:</td>
          <td class="min-contain">
            <span class="font-semibold ml-2 underline text-blue-500">{{data?.employeeDTO?.reportTo?.reportTo?.profile?.fullName}}</span>
          </td>
        </tr>

        <tr class="col-span-full">
          <td>{{ t('MY_TIME.comment') }}:</td>
          <td class="min-contain">
            <span class="font-semibold ml-2">{{data?.comment}}</span>
          </td>
        </tr>

      </table>

      <tui-tabs [(activeItemIndex)]="activeItemIndex" class="mt-8">
        <button tuiRipple="var(--tui-text-01)" tuiTab>{{ t('MY_TIME.comment') }}</button>
        <button tuiRipple="var(--tui-text-01)" tuiTab>{{ t('MY_TIME.history') }}</button>
      </tui-tabs>
      <ng-container [ngSwitch]="activeItemIndex">
        <ng-container *ngSwitchCase="0">
          <hcm-noted class="m-8"></hcm-noted>
        </ng-container>
        <ng-container *ngSwitchCase="1">
          <hcm-history-request class="mt-8"></hcm-history-request>
        </ng-container>
      </ng-container>
    </article>
  </section>
</main>
