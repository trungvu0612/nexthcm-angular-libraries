<div *transloco="let t">
  <ng-container *ngIf="!request.items.length; else halfDay">
    <p *ngIf="request.durationInDay > 1; else durationLessThanOne">
      ({{ request.fromDate | translocoDate }} - {{ request.toDate | translocoDate }}) {{'-'}} {{ t('fullDay') }}
    </p>
    <ng-template #durationLessThanOne>
      {{ request.fromDate | translocoDate }} {{'-'}} {{ t('fullDay') }}
    </ng-template>
  </ng-container>

  <ng-template #halfDay>
    <ng-container *ngFor="let itemType of request.items; index as index">
      <div *ngIf="itemType">
        <div *ngIf="itemType.constructor.name; else specialTime">
          <div *ngIf="request.durationInDay > 1; else durationLessThanOne">
            <p *ngIf="request.partialDayType.type === 1">
              {{ (index === 0 ? request.fromDate : request.toDate) | translocoDate }}
              {{ '-' }} {{ (index === 0 ? request.toDate : request.fromDate) | translocoDate }}
              ({{ t('allHalfDay') }} {{':'}} {{itemType.morning ? t('morning') : t('afternoon')}})
            </p>
            <p *ngIf="request.partialDayType.type === 2">
              {{ (index === 0 ? request.fromDate : request.toDate) | translocoDate }}
              ({{ t('halfDay') }} {{':'}} {{ itemType.morning ? t('morning') : t('afternoon') }} )
              {{ (index === 0 ? request.toDate : request.fromDate) | translocoDate }}
            </p>
            <p *ngIf="request.partialDayType.type === 3">
              {{ (index === 0 ? request.fromDate : request.toDate) | translocoDate }}
              {{ '-' }} {{ (index === 0 ? request.toDate : request.fromDate) | translocoDate }}
              ({{ t('halfDay') }} {{':'}} {{itemType.morning ? t('morning') : t('afternoon')}})
            </p>
            <div
              *ngIf="request.partialDayType.type === 4 && !itemType.fromTime; else specialTime">
              <p *ngIf="index === 0">
                {{ (index === 0 ? request.fromDate : request.toDate) | translocoDate }}
                {{ '-' }} ({{ t('halfDay') }} {{':'}} {{itemType.morning ? t('morning') : t('afternoon')}})
              </p>
              <p *ngIf="index === 1">
                {{ (index === 1 ? request.toDate : request.fromDate) | translocoDate }}
                {{ '-' }} ({{ t('halfDay') }} {{':'}} {{itemType.morning ? t('morning') : t('afternoon')}})
              </p>
            </div>
          </div>
          <ng-template #durationLessThanOne>
            {{ (index === 0 ? request.fromDate : request.toDate) | translocoDate }}
            ({{ t('halfDay') }} {{':'}} {{ itemType.morning ? t('morning') : t('afternoon') }})
          </ng-template>
        </div>
      </div>
      <ng-template #specialTime>
        <ng-container *ngIf="request.items.length === 1; else specialTime2Index">
          <p *ngIf="itemType.fromTime && itemType.toTime">
            {{ request.fromDate | translocoDate }} - {{ request.toDate | translocoDate }} {{'-'}}
            ({{itemType.fromTime * 1000 | date: 'HH:mm':'UTC'}}
            - {{ itemType.toTime * 1000 | date: 'HH:mm':'UTC' }})
          </p>
        </ng-container>

        <ng-template #specialTime2Index>
          <p *ngIf="index === 0 && itemType.fromTime && itemType.toTime">
            {{ request.fromDate | translocoDate }} {{'-'}}
            ({{ itemType.fromTime * 1000 | date: 'HH:mm':'UTC' }} - {{ itemType.toTime * 1000 | date: 'HH:mm':'UTC' }})
          </p>
          <p *ngIf="index === 1 && itemType.fromTime && itemType.toTime">
            {{ request.toDate | translocoDate }} {{'-'}}
            ({{ itemType.fromTime * 1000 | date: 'HH:mm':'UTC' }} - {{ itemType.toTime * 1000 | date: 'HH:mm':'UTC' }})
          </p>
        </ng-template>
      </ng-template>
    </ng-container>
  </ng-template>
</div>
