<header *transloco="let t" class="mb-10">
  <p class="text-2xl font-medium">{{ t(greeting) }},</p>
  <h1 class="text-3xl font-bold">
    {{ t('welcomeBack') }}, <span class="text-blue-500">{{ fullName$ | async }}</span>
    <ngx-emoji [size]="32" class="ml-2" emoji="wave" set="apple"></ngx-emoji>
  </h1>
</header>
<main *transloco="let t">
  <section *rxLet="myWorkingDays$; let myWorkingDays" class="grid grid-cols-1 gap-6 my-10 md:grid-cols-3">
    <div class="relative col-span-2 p-8 text-base text-center text-white bg-indigo-700 rounded-xl">
      <div class="shadow-tmp"></div>
      <tui-loader [overlay]="true" [showLoader]="(loading$ | async) === true">
        <div class="table w-full table-fixed">
          <div class="table-header-group font-bold">
            <div class="table-cell">{{ t('workingDays') }}</div>
            <div class="table-cell border-r border-l">{{ t('inTime') }}</div>
            <div class="table-cell">{{ t('outTime') }}</div>
          </div>
          <div class="table-row-group">
            <div class="table-cell py-8">{{ t('today') }}</div>
            <div class="table-cell py-8 border-r border-l">
              {{
                myWorkingDays && myWorkingDays[0]?.inTime
                  ? (myWorkingDays[0].inTime * 1000 | date: 'HH:mm':'UTC')
                  : '-:-'
              }}
            </div>
            <div class="table-cell py-8">
              {{
                myWorkingDays && myWorkingDays[0]?.outTime
                  ? (myWorkingDays[0].outTime * 1000 | date: 'HH:mm':'UTC')
                  : '-:-'
              }}
            </div>
          </div>
          <div class="table-row-group">
            <div class="table-cell">{{ t('yesterday') }}</div>
            <div class="table-cell border-r border-l">
              {{
                myWorkingDays && myWorkingDays[1]?.inTime
                  ? (myWorkingDays[1].inTime * 1000 | date: 'HH:mm':'UTC')
                  : '-:-'
              }}
            </div>
            <div class="table-cell">
              {{
                myWorkingDays && myWorkingDays[1]?.outTime
                  ? (myWorkingDays[1].outTime * 1000 | date: 'HH:mm':'UTC')
                  : '-:-'
              }}
            </div>
          </div>
        </div>
        <div class="flex justify-center pt-8">
          <span tuiMode="onDark">
            <a routerLink="/my-time/working-hours/only-me" tuiLink>{{ t('viewDetails') }}</a>
          </span>
        </div>
      </tui-loader>
    </div>

    <tui-island *rxLet="shouldCheckedOut$; let shouldCheckedOut" [hoverable]="true" class="right-column" size="l">
      <ng-container *ngIf="shouldCheckedOut === null">
        <div class="font-semibold tui-island__title">{{ t('yourWorkingDaysThisMonth') }}</div>
        <div *rxLet="monthWorkingTime$; let monthWorkingTime">
          <span class="text-8xl font-bold text-blue-500">{{
            monthWorkingTime?.workingDay || 0 | translocoDecimal: { maximumFractionDigits: 1 }
          }}</span
          ><span class="text-4xl font-bold text-gray-400"
            >/{{ monthWorkingTime?.totalWorkingDay ? monthWorkingTime.totalWorkingDay : '-' }}</span
          >
        </div>
      </ng-container>
      <ng-container *ngIf="shouldCheckedOut !== null">
        <div class="absolute top-0 right-0">
          <button
            (click)="shouldCheckedOut$.next(null)"
            appearance="flat"
            icon="tuiIconRemoveLarge"
            tuiIconButton
            type="button"
          ></button>
        </div>
        <div class="flex flex-col items-center space-y-6">
          <svg-icon fontSize="130px" key="fingerprint"></svg-icon>
          <button
            (click)="checkInOut$.next()"
            [showLoader]="(checkInOutLoading$ | async) === true"
            tuiButton
            type="button"
          >
            {{ t(shouldCheckedOut ? 'checkOut' : 'checkIn') }}
          </button>
        </div>
      </ng-container>
    </tui-island>
  </section>
</main>
