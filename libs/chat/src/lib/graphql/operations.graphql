query getRoomList($userId: uuid!) {
  chatRooms: chatapp_chat_room {
    roomId: room_id
    avatar
    lastMessageTime: last_message
    title
    type
    currentUser: chat_participants(where: {chat_user: {chat_user_id: {_eq: $userId}}}) {
      lastRead: last_read
    }
    chatParticipants: chat_participants(where: {chat_user: {chat_user_id: {_neq: $userId}}}) {
      chatUser: chat_user {
        avatar
      }
    }
    chatMessages: chat_messages(limit: 1) {
      content
      type
      createdDate: created_date
    }
  }
}

query getFirstRoom {
  chatRooms: chatapp_chat_room(limit: 1) {
    roomId: room_id
  }
}

query getChatRoomDetail($roomId: uuid!, $limit: Int!) {
  chatRoomDetail: chatapp_chat_room_by_pk(room_id: $roomId) {
    avatar
    title
    type
    messages: chat_messages(limit: $limit) {
      content
      created_date
      type
      userId: user_id
      chat_user {
        avatar
        fullName: full_name
        lastSeen: last_seen
      }
    }
  }
}
