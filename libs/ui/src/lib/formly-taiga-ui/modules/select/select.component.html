<tui-select
  *tuiLet="to.options | selectOptions | async as items"
  [formControl]="$any(formControl)"
  [formlyAttributes]="field"
  [style.maxWidth]="to.maxWidth"
  [tuiHintContent]="to.description || null"
  [tuiTextfieldLabelOutside]="to.textfieldLabelOutside"
  [tuiTextfieldSize]="to.textfieldSize"
  [identityMatcher]="identityMatcher"
  [valueContent]="items ? stringify(items) : loading"
>
  {{ to.placeholder }}
  <ng-template tuiDataList>
    <tui-data-list *ngIf="items; else loading">
      <button
        *ngFor="let item of items"
        [disabled]="!!item.disabled"
        [value]="to.valueProp ? item[to.valueProp] : item"
        tuiOption
      >
        {{ item[to.labelProp] }}
      </button>
    </tui-data-list>
  </ng-template>
  <ng-template #loading>
    <tui-loader class="tui-space_vertical-3 flex-1"></tui-loader>
  </ng-template>
</tui-select>
