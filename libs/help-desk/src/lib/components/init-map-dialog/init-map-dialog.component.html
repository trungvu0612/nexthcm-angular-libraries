<h1 class="text-2xl text-center font-semibold">Init Map</h1>
<formly-form [fields]="fields" [form]="form" [model]="model" class="flex justify-center flex-wrap mb-4"></formly-form>
<section #zone class="relative ring-4 ring-purple-700">
  <div
    (click)="onClickOnLine(index)"
    (cdkDragEnded)="moveLine(index, $event.distance.y, 'row')"
    *ngFor="let top of rows; index as index"
    [style]="{ top: top + '%', transform: 'translate3d(0, -50%, 0)' }"
    cdkDrag
    cdkDragBoundary="section"
    class="line rowLine"
    [class.ring-2]="isClicked('row', index)"
  >
    <div></div>
  </div>
  <div
    (click)="onClickOnLine(index)"
    (cdkDragEnded)="moveLine(index, $event.distance.x, 'column')"
    *ngFor="let left of columns; index as index"
    [style]="{ left: left + '%', transform: 'translate3d(-50%, 0, 0)' }"
    cdkDrag
    cdkDragBoundary="section"
    class="line columnLine"
    [class.ring-2]="isClicked('column', index)"
  >
    <div></div>
  </div>
  <ng-container *ngFor="let row of seatMap; index as y">
    <ng-container *ngFor="let seat of row; index as x">
      <button
        (click)="toggleSeat(seat)"
        (cdkDragEnded)="moveSeat(x, y, $event)"
        (cdkDragStarted)="onDragStarted()"
        [style]="{
          top: seat.top + '%',
          left: seat.left + '%',
          width: dimension[0] + '%',
          height: dimension[1] + '%',
          transform: 'translate3d(-50%, -50%, 0)'
        }"
        cdkDrag
        cdkDragBoundary="section"
        class="seat"
      >
        <tui-svg *ngIf="seat.isSeat; else addSeat" src="tuiIconUser"></tui-svg>
        <ng-template #addSeat>
          <tui-svg src="tuiIconPlus"></tui-svg>
        </ng-template>
      </button>
    </ng-container>
  </ng-container>
  <img class="w-full h-full" src="https://i.imgur.com/LgjOMhH.png" />
</section>
<button (click)="submit()" [disabled]="!form.valid" class="blue-button mt-4 mx-auto">Submit</button>
