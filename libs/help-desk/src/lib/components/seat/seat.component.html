<tui-hosted-dropdown
  (click)="onClick('dropdown')"
  *ngIf="seat.assignedUser as user; else icon"
  [(open)]="openDropdown"
  [canOpen]="(dragging$ | async) !== true"
  [class]="seatStatus"
  [content]="content"
  [tuiDropdownSided]="true"
  class="border-2 bg-white"
>
  <p class="flex justify-center items-center text-center text-xs font-semibold">
    {{ user.username?.replace('.', ' ') | titlecase }}
  </p>
  <ng-template #content>
    <article class="p-4">
      <div class="flex items-center border-b border-gray-300 pb-3">
        <tui-avatar
          [avatarUrl]="user.image || null"
          [rounded]="true"
          [text]="user.username || ''"
          size="xl"
        ></tui-avatar>
        <div class="flex-auto font-semibold text-center px-4">
          <h1 class="text-2xl mt-3 mb-2">{{ user.username }}</h1>
          <p class="text-lg text-gray-400">{{ user.dateOfBirth | date: 'dd/MM/yyyy' }}</p>
        </div>
      </div>
      <table class="detail-table mt-2">
        <tr>
          <th>Status:</th>
          <td>
            <span *ngIf="user.status" [class]="seatStatus" class="border-2 rounded-xl p-1">{{ user.status }}</span>
          </td>
        </tr>
        <tr>
          <th>Team:</th>
          <td>
            <a [routerLink]="['/human-resource/teams', 'team-id']" class="custom-link">{{ user.team }}</a>
          </td>
        </tr>
        <tr>
          <th>Phone:</th>
          <td>{{ user.phoneNumber }}</td>
        </tr>
        <tr>
          <th>Skype:</th>
          <td>{{ user.skype }}</td>
        </tr>
        <tr>
          <th>Email:</th>
          <td>{{ user.email }}</td>
        </tr>
      </table>
      <div class="medium-buttons flex justify-evenly mt-3">
        <button (click)="deleteSeat()" *ngIf="isAdmin" class="blue-button btn-custom btn-red">Delete</button>
        <button [routerLink]="['/human-resource/employees', user.id]" class="blue-button">Detail</button>
      </div>
    </article>
  </ng-template>
</tui-hosted-dropdown>
<ng-template #icon>
  <img (click)="onClick('add')" class="object-contain w-full" src="assets/icons/marker.svg" />
</ng-template>
