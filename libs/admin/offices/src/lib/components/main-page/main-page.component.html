<main *transloco="let t" class="main-page">
  <header>
    <h1>{{ t(type + 'List') }}</h1>
    <button (click)="add.emit()" class="blue-button">
      {{ t('add' + (type | titlecase)) }}
    </button>
  </header>
  <section class="main-section">
    <table *tuiLet="data$ | async as data" [columns]="columns" class="hcm-tui-table" tuiTable>
      <thead>
        <tr tuiThGroup>
          <th *tuiHead="'name'" tuiTh>{{ t('name') }}</th>
          <th *tuiHead="'adder'" tuiTh>{{ t('adder') }}</th>
          <th *tuiHead="'description'" tuiTh>{{ t('description') }}</th>
          <ng-container *ngIf="columns.includes('address')">
            <th *tuiHead="'address'" tuiTh>{{ t('address') }}</th>
          </ng-container>
          <ng-container *ngIf="columns.includes('numberOfRoom')">
            <th *tuiHead="'numberOfRoom'" tuiTh>{{ t('numberOfRoom') }}</th>
          </ng-container>
          <ng-container *ngIf="columns.includes('office')">
            <th *tuiHead="'office'" tuiTh>{{ t('office') }}</th>
          </ng-container>
          <th *tuiHead="'action'" [sorter]="null" tuiTh>{{ t('action') }}</th>
        </tr>
      </thead>
      <tbody [data]="data?.items || []" tuiTbody>
        <tr *tuiRow="let item of data?.items || []; index as index" tuiTr>
          <td *tuiCell="'name'" tuiTd>
            {{ item.name }}
          </td>
          <td *tuiCell="'adder'" tuiTd>
            {{ item.adder }}
          </td>
          <td *tuiCell="'description'" tuiTd>
            {{ item.description }}
          </td>
          <ng-container *ngIf="columns.includes('address')">
            <td *tuiCell="'address'" tuiTd>
              {{ item.address }}
            </td>
          </ng-container>
          <ng-container *ngIf="columns.includes('numberOfRoom')">
            <td *tuiCell="'numberOfRoom'" tuiTd>
              {{ item.numberOfRoom }}
            </td>
          </ng-container>
          <ng-container *ngIf="columns.includes('office')">
            <td *tuiCell="'office'" tuiTd>
              {{ item.office?.name }}
            </td>
          </ng-container>
          <td *tuiCell="'action'" tuiTd>
            <div class="flex text-gray-400">
              <button (click)="edit.emit(item)">
                <tui-svg src="tuiIconEdit"></tui-svg>
              </button>
              <button (click)="remove.emit(item)">
                <tui-svg src="tuiIconTrash"></tui-svg>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td [colSpan]="columns.length">
            <tui-table-pagination
              (pageChange)="onChange('page', $event)"
              (sizeChange)="onChange('size', $event)"
              [total]="data?.totalElements || 0"
            ></tui-table-pagination>
          </td>
        </tr>
      </tfoot>
    </table>
  </section>
</main>
