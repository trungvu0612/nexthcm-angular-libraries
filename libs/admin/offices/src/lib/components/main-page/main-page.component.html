<main *transloco="let t" class="main-page">
  <header>
    <h1>{{ t(type + 'List') }}</h1>
    <button (click)="add.emit()" class="blue-button">
      {{ t('add' + type[0].toUpperCase() + type.slice(1)) }}
    </button>
  </header>
  <section class="main-section">
    <table *ngIf="data$ | async as data" [columns]="columns" class="hcm-tui-table" tuiTable>
      <thead>
        <tr tuiThGroup>
          <th *tuiHead="'name'" tuiTh>{{ t('name') }}</th>
          <th *tuiHead="'adder'" tuiTh>{{ t('adder') }}</th>
          <th *tuiHead="'description'" tuiTh>{{ t('description') }}</th>
          <ng-container *ngIf="columns.includes('address')">
            <th *tuiHead="'address'" tuiTh>{{ t('address') }}</th>
          </ng-container>
          <ng-container *ngIf="columns.includes('office')">
            <th *tuiHead="'office'" tuiTh>{{ t('office') }}</th>
          </ng-container>
          <th *tuiHead="'action'" [sorter]="null" tuiTh>{{ t('action') }}</th>
        </tr>
      </thead>
      <tbody [data]="data.items" tuiTbody>
        <tr *tuiRow="let item of data.items; index as index" tuiTr>
          <td *tuiCell="'name'" tuiTd>
            {{ item.name }}
          </td>
          <td *tuiCell="'adder'" tuiTd>
            {{ item.adder }}
          </td>
          <td *tuiCell="'description'" tuiTd>
            {{ item.description }}
          </td>
          <ng-container *ngIf="columns.includes('address')">
            <td *tuiCell="'address'" tuiTd>
              {{ item.address }}
            </td>
          </ng-container>
          <ng-container *ngIf="columns.includes('office')">
            <td *tuiCell="'office'" tuiTd>
              {{ item.office?.name }}
            </td>
          </ng-container>
          <td *tuiCell="'action'" tuiTd>
            <div class="flex gap-1 text-gray-500">
              <tui-svg (click)="edit.emit(item)" class="cursor-pointer" src="tuiIconEdit"></tui-svg>
              <tui-svg (click)="remove.emit(item)" class="cursor-pointer" src="tuiIconTrash"></tui-svg>
            </div>
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td [colSpan]="columns.length">
            <tui-table-pagination
              (pageChange)="changePagination('page', $event)"
              (sizeChange)="changePagination('size', $event)"
              [total]="data.totalElements"
            ></tui-table-pagination>
          </td>
        </tr>
      </tfoot>
    </table>
  </section>
</main>
