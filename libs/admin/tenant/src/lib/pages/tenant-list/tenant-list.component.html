<main *transloco="let t" class="main-page">
  <header>
    <h1>{{ t('tenantManagement') }}</h1>
    <button routerLink="./create" tuiButton>
      {{ t('createTenant') }}
    </button>
  </header>
  <div *ngIf="statistic$ | async as statistic" class="flex gap-8 mb-8">
    <tui-island [hoverable]="true">
      <h3 class="tui-island__title">{{ t('active') }}</h3>
      <p class="tui-island__paragraph text-approved">{{ statistic.active }}</p>
    </tui-island>
    <tui-island [hoverable]="true">
      <h3 class="tui-island__title">{{ t('pending') }}</h3>
      <p class="tui-island__paragraph text-waiting">{{ statistic.pending }}</p>
    </tui-island>
    <tui-island [hoverable]="true">
      <h3 class="tui-island__title">{{ t('deactivate') }}</h3>
      <p class="tui-island__paragraph text-rejected">{{ statistic.deactivate }}</p>
    </tui-island>
  </div>
  <section *tuiLet="data$ | async as data" class="main-section">
    <tui-input [formControl]="searchControl" [tuiTextfieldLabelOutside]="true" class="w-80 mb-4" icon="tuiIconSearch">
      {{ t('searchBy', { value: t('companyCode') + ', ' + t('companyName') }) }}
    </tui-input>
    <ngx-table [columns]="(columns$ | async) || []" [configuration]="configuration" [data]="data?.items || []">
      <ng-template let-index="index" let-row>
        <td class="text-center">{{ index + 1 }}</td>
        <td>{{ row.tenantCode }}</td>
        <td>{{ row.tenantName }}</td>
        <td>
          <tui-tag
            [class]="{
              'rejected-tag': row.state === -1,
              'waiting-tag': row.state === 0,
              'approved-tag': row.state === 1
            }"
            [hoverable]="true"
            [value]="t(row.state | getStatus)"
          ></tui-tag>
        </td>
        <td class="flex gap-2">
          <button appearance="flat" icon="tuiIconShowLarge" routerLink="./information" size="m" tuiIconButton></button>
          <button
            (click)="deleteTenant(row.id)"
            appearance="flat"
            icon="tuiIconTrashLarge"
            size="m"
            tuiIconButton
          ></button>
        </td>
      </ng-template>
    </ngx-table>
    <tui-table-pagination
      (pageChange)="changePagination('page', $event)"
      (sizeChange)="changePagination('size', $event)"
      [total]="data?.totalElements || 0"
    ></tui-table-pagination>
  </section>
</main>
<hcm-prompt #prompt></hcm-prompt>
