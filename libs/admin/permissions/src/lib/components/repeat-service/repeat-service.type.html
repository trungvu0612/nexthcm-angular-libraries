<section *ngFor="let field of field.fieldGroup; index as index" class="shadow-md bg-gray-100 rounded-lg mb-6">
  <div [class.justify-between]="index !== 0" class="grid grid-cols-3 p-2">
    <button
      (click)="toggleExpandable(index)"
      [disabled]="!formControl.at(index).valid"
      class="col-start-1 justify-self-start text-primary"
    >
      <tui-svg [src]="expandedList[index] ? 'tuiIconCollapse' : 'tuiIconExpand'"></tui-svg>
      {{ expandedList[index] ? 'Collapse' : 'Expand' }}
    </button>
    <div class="col-start-2 justify-self-center font-semibold py-1">
      <p
        *ngIf="formControl.at(index).get('service')?.value?.name as name; else choose"
        class="text-primary text-lg"
      >
        {{ name }}
      </p>
      <ng-template #choose><p class="text-gray-600">Choose a service</p></ng-template>
    </div>
    <button (click)="remove(index)" *ngIf="index !== 0" class="col-start-3 justify-self-end text-red-600">
      <tui-svg src="tuiIconCloseCircleLarge"></tui-svg>
      Remove
    </button>
  </div>
  <tui-expand [expanded]="expandedList[index]">
    <ng-template tuiExpandContent>
      <formly-field [field]="field" class="block p-8 pt-0"></formly-field>
    </ng-template>
  </tui-expand>
</section>
<button (click)="add()" class="block text-primary mx-auto">
  <tui-svg src="tuiIconPlusCircleLarge"></tui-svg>
  Add additional services
</button>
