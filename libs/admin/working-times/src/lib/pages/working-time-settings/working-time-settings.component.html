<main *transloco='let t' class='main-page'>
  <tui-tabs [(activeItemIndex)]='activeItemIndex'>
    <button tuiTab>
      <ng-container *ngIf='!this.workingHourId'>{{ t('WORKING_HOUR.addCalendar') }}</ng-container>
      <ng-container *ngIf='this.workingHourId'>{{ t('WORKING_HOUR.updateCalendar') }}</ng-container>
    </button>
    <button tuiTab>
      {{ t('WORKING_HOUR.addOverTime') }}
    </button>
  </tui-tabs>

  <ng-container [ngSwitch]='activeItemIndex'>
    <div class='mt-5'>
      <ng-container *ngSwitchCase='0'>
        <div class='max-w-3xl'>
          <div class='grid grid-cols-2'>
            <div class='text-xl font-bold text-blue-500'>
              <ng-container *ngIf='!this.workingHourId'>{{ t('WORKING_HOUR.addCalendar') }}</ng-container>
              <ng-container *ngIf='this.workingHourId'>{{ t('WORKING_HOUR.updateCalendar') }}</ng-container>
            </div>
            <div class='work-shift text-center'>Work shift</div>
          </div>

          <form [formGroup]='$any(form)'>
            <formly-form [fields]='fields' [form]='form' [model]='model' class='grid grid-cols-3 gap-4'>
            </formly-form>
          </form>

          <div class='my-5 max-w-6xl'>
            <div class='font-bold text-xl mb-5'>Holiday</div>
            <form [formGroup]='holidayForm' class='b-form'>
              <div class='flex items-center gap-4'>
                <div class='text-base'>Add holidays</div>
                <div>
                  <tui-input-date
                    [tuiTextfieldLabelOutside]='true'
                    class='tui-dropdown'
                    formControlName='holidayValue'
                    tuiTextfieldSize='m'
                  >
                    Choose a date
                  </tui-input-date>
                </div>
                <div>
                  <tui-input
                    [tuiTextfieldLabelOutside]='true'
                    class='tui-dropdown'
                    formControlName='holidayName'
                    tuiTextfieldSize='m'
                  >
                    Holiday Name
                  </tui-input>
                </div>
                <div>
                  <tui-checkbox-labeled class='tui-space_top-3' formControlName='repeatYearly'>
                    Repeat yearly
                  </tui-checkbox-labeled>
                </div>
                <div>
                  <button
                    (click)='addHolidayTime()'
                    class='bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded'
                  >
                    Add
                  </button>
                </div>
              </div>
            </form>
            <ngx-table [columns]='columns' [configuration]='configuration' [data]='dataHoliday'>
              <ng-template let-index='index' let-row>
                <td>{{ row?.holidayDate | date: 'dd/MM/yyyy' }}</td>
                <td>{{ row?.name }}</td>
                <td>
                  <ng-container *ngIf='row?.recurring'><img class='w-6' src='/assets/images/close.png' /></ng-container>
                </td>
                <td>
                  <button
                    (click)='removeHoliday(index, row?.id)'
                    class='
                      text-sm
                      bg-transparent
                      hover:bg-blue-500
                      text-blue-700
                      font-semibold
                      hover:text-white
                      py-2
                      px-4
                      border border-blue-500
                      hover:border-transparent
                      rounded
                    '
                  >
                    Delete
                  </button>
                </td>
              </ng-template>
            </ngx-table>
          </div>
          <div class='my-10 text-right'>
            <button (click)='saveSettings()' [disabled]='!form.valid' class='blue-button mt-5 mx-auto'>LÆ°u</button>
          </div>
        </div>
      </ng-container>
      <ng-container *ngSwitchCase='1'>
        <hcm-overtime-working></hcm-overtime-working>
      </ng-container>
    </div>
  </ng-container>
</main>
