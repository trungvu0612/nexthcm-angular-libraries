<p class="mb-1 text-sm font-semibold">
  <span>{{ to.label }}</span> <span class="tui-required"></span>
</p>
<div *tuiLet="templateVariables$ | async as templateVariables" class="flex flex-wrap mb-2">
  <button
    (click)="onAddTemplateVariable(variable)"
    *ngFor="let variable of templateVariables"
    [tuiHint]="variable.description ? ('WORKFLOW.' + variable.description | transloco) : null"
    appearance="secondary"
    class="mr-2 mb-1"
    size="xs"
    tuiButton
    tuiHintDirection="bottom-left"
    type="button"
  >
    {{ variable.name }}
  </button>
</div>
<quill-editor
  #editor
  (onEditorChanged)="onEditorChanged($event)"
  [formControl]="$any(formControl)"
  [formlyAttributes]="field"
  [style]="{ '--editor-height': to.height }"
  format="json"
  placeholder=""
  [modules]="to.quillModules"
  [maxLength]="to.maxLength"
></quill-editor>
<ng-container *ngTemplateOutlet="errorTpl"></ng-container>

<ng-template #errorTpl>
  <tui-error *ngIf="showError" [error]="error"></tui-error>
</ng-template>

<ng-template #errorContent="polymorpheus" [polymorpheus]="context">
  <formly-validation-message [field]="field"></formly-validation-message>
</ng-template>
