<h2 class="tui-text_h3">Processes Management</h2>
<section class="flex justify-end">
  <button (click)="onCreateProcess()" class="tui-space_right-3 tui-space_bottom-3" size="m" tuiButton>
    Create a process
  </button>
</section>
<tui-loader [overlay]="true" [showLoader]="(loading$ | async) || false">
  <ngx-table
    #table
    *tuiLet="data$ | async as data"
    [columns]="columns"
    [configuration]="configuration"
    [data]="data || []"
    [selectAllTemplate]="selectAllTemplate"
  >
    <ng-template let-row>
      <td>
        <tui-checkbox
          (ngModelChange)="rowSelected(row, $event)"
          [ngModel]="selected.has(process(row).id || '')"
          size="l"
        ></tui-checkbox>
      </td>
      <td>{{ process(row).name }}</td>
      <td>{{ process(row).description }}</td>
      <td></td>
      <td>
        <div class="flex items-center">
          <button
            appearance="flat"
            class="tui-space_right-3"
            icon="tuiIconEditLarge"
            [routerLink]="[process(row).id, 'edit']"
            size="m"
            tuiIconButton
            type="button"
          ></button>
          <button
            appearance="flat"
            class="tui-space_right-3"
            icon="tuiIconShowLarge"
            routerLink=""
            size="m"
            tuiIconButton
            type="button"
          ></button>
          <button
            (click)="onRemoveProcess(process(row).id)"
            appearance="flat"
            icon="tuiIconTrashLarge"
            size="m"
            tuiIconButton
            type="button"
          ></button>
        </div>
      </td>
    </ng-template>
  </ngx-table>
</tui-loader>
<tui-table-pagination
  (pageChange)="onPage($event)"
  (sizeChange)="onSize($event)"
  [total]="(total$ | async) || 0"
  class="tui-space_top-2"
></tui-table-pagination>

<ng-template #selectAllTemplate let-changeEvent>
  <tui-checkbox (ngModelChange)="changeEvent()" [(ngModel)]="allSelected" size="l"></tui-checkbox>
</ng-template>
